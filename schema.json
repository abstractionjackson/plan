{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/abstractionjackson/plan/schema.json",
    "title": "Plan",
    "description": "A Day Planner",
    "type": "object",
    "properties": {
        "year": {
            "description": "The calendar year",
            "type": "integer",
            "minimum": 1000,
            "maximum": 9999
        },
        "quarters": {
            "description": "Instances of quarterly planning",
            "type": "array",
            "items": {
                "oneOf": [
                    { "type": "null" },
                    { "$ref": "#/$defs/quarter" }
                ]
            },
            "maxItems": 4
        },
        "weeks": {
            "description": "Instances of weekly planning",
            "type": "array",
            "items": {
                "oneOf": [
                    { "type": "null" },
                    { "$ref": "#/$defs/week" }
                ]
            },
            "maxItems": 52
        },
        "days": {
            "description": "Instances of daily planning",
            "type": "array",
            "items": {
                "oneOf": [
                    { "type": "null" },
                    { "$ref": "#/$defs/day" }
                ]
            },
            "maxItems": 365
        }
    },
    "required": ["year", "quarters"],
    "$defs": {
        "quarter": {
            "description": "A plan that spans one of the four quarters",
            "type": "object",
            "properties": {
               "todos" : {
                    "description": "Quarterly Goals",
                    "type": "array",
                    "items": { "$ref": "#/$defs/todo"},
                    "uniqueItems": true
               }
            },
            "required": ["todos"]
        },
        "week" : {
            "description": "A plan that spans one week",
            "type": "object",
            "properties": {
                "todos" : {
                    "description": "Weekly Goals",
                    "type": "array",
                    "items": { "$ref": "#/$defs/todo"},
                    "uniqueItems": true
                }
            },
            "required": ["todos"]
        },
        "day": {
            "description": "A plan that spans one day",
            "type": "object",
            "properties": {
                "todos" : {
                    "description": "Daily Goals",
                    "type": "array",
                    "items": { "$ref": "#/$defs/todo"},
                    "uniqueItems": true
                }
            },
            "required": ["todos"]
        },
        "todo": {
            "description": "A stateful task",
            "type": "object",
            "properties": {
                "id": {
                    "description": "A unique identifier",
                    "type": "integer"
                },
                "createdAt": {
                    "description": "The creation timestamp of the todo",
                    "type": "string",
                    "format": "date-time"
                },
                "state": {
                    "description": "The state of a todo...",
                    "type": "string",
                    "enum": [
                        "TODO",
                        "DONE"
                    ]
                },
                "title": {
                    "description": "A concise identifier of the specific task",
                    "type": "string"
                },
                "subtasks": {
                    "description": "Subtasks of this todo",
                    "type": "array",
                    "items": { "$ref": "#/$defs/todo" }
                },
                "deadline": {
                    "description": "The deadline for completing the todo",
                    "type": "string",
                    "format": "date-time"
                },
                "scheduled": {
                    "description": "The scheduled date and time for the todo",
                    "type": "string",
                    "format": "date-time"
                }
            },
            "required": ["id", "state", "title", "createdAt"]
        }
    }
}